# Cursor Rules - Production-Ready Multi-Agent Systems with DSPy

## ğŸ“š CONTEXTO DO PROJETO

Este Ã© um **livro tÃ©cnico** sobre sistemas multi-agent com DSPy.

**SEMPRE CONSULTAR PRIMEIRO:** `docs/_planejamento/00-FONTE-DA-VERDADE.md`

---

## ğŸ¯ OBJETIVOS

1. **Livro completo:** 17 capÃ­tulos + 7 apÃªndices
2. **Formato:** Jupyter Book (notebooks + markdown)
3. **Idioma:** PortuguÃªs (PT-BR) com termos tÃ©cnicos em inglÃªs
4. **Qualidade:** Production-grade, profissional, referenciado
5. **PÃºblico:** Engenheiros ML, desenvolvedores AI, pesquisadores

---

## ğŸ“‹ SEMPRE FAZER

### Antes de Qualquer AÃ§Ã£o:
1. âœ… Ler `docs/_planejamento/00-FONTE-DA-VERDADE.md`
2. âœ… Verificar status real do capÃ­tulo
3. âœ… Consultar `docs/_planejamento/02-MAPEAMENTO-NOTEBOOKS.md` para fontes
4. âœ… Seguir convenÃ§Ãµes de `docs/_planejamento/03-WRITING-GUIDE.md`

### Durante Trabalho:
1. âœ… **Modelar, nÃ£o copiar:** Notebooks existentes sÃ£o fonte de inspiraÃ§Ã£o
2. âœ… **Adicionar teoria:** Muito mais contexto que notebooks originais
3. âœ… **Explicar conceitos:** Ver `docs/_planejamento/04-KNOWLEDGE-GAPS.md`
4. âœ… **Testar cÃ³digo:** TODO cÃ³digo deve executar sem erros
5. âœ… **Citar referÃªncias:** Papers em `docs/_planejamento/08-REFERENCIAS-ACADEMICAS.md`

### Depois de Completar:
1. âœ… Atualizar `docs/_planejamento/00-FONTE-DA-VERDADE.md`
2. âœ… Atualizar `docs/_planejamento/05-PROGRESS-TRACKER.md`
3. âœ… Marcar TODOs como completos

---

## âš ï¸ NUNCA FAZER

### âŒ NÃ£o Copiar Notebooks Diretamente
- **Errado:** Copiar cÃ©lulas do notebook original
- **Certo:** MODELAR - analisar, extrair conceitos, criar versÃ£o didÃ¡tica

### âŒ NÃ£o Escrever Sem Contexto
- **Errado:** Escrever cÃ³digo sem explicaÃ§Ã£o
- **Certo:** Teoria â†’ ImplementaÃ§Ã£o â†’ AnÃ¡lise

### âŒ NÃ£o Ignorar ReferÃªncias
- **Errado:** Mencionar conceito sem citar fonte
- **Certo:** Sempre citar papers quando necessÃ¡rio

### âŒ NÃ£o Misturar PortuguÃªs e InglÃªs Incorretamente
- **Errado:** "Vamos fazer o training do model"
- **Certo:** "Vamos fazer o fine-tuning do modelo"

### âŒ NÃ£o Ser Sensacionalista
- **Errado:** "Multi-agent RESOLVE TUDO!"
- **Certo:** "Multi-agent: quando usar, trade-offs, limitaÃ§Ãµes"

---

## ğŸŒ CONVENÃ‡Ã•ES DE IDIOMA

### Use PORTUGUÃŠS (PT-BR) para:
- âœ… Narrativa e explicaÃ§Ãµes
- âœ… TÃ­tulos de capÃ­tulos e seÃ§Ãµes
- âœ… ComentÃ¡rios no cÃ³digo
- âœ… Docstrings
- âœ… AnÃ¡lise e conclusÃµes

### Use INGLÃŠS para:
- âœ… Termos tÃ©cnicos consagrados
- âœ… Nomes de classes, funÃ§Ãµes, variÃ¡veis
- âœ… Nomes de frameworks, bibliotecas
- âœ… Conceitos tÃ©cnicos universais

**Exemplos de termos que FICAM em inglÃªs:**
- Signature, Module, Predictor, ChainOfThought, ReAct
- Fine-tuning (nÃ£o "ajuste fino")
- Pipeline, Hierarchical, Collaborative, Reflexive
- Trade-off, Overfitting, Prompt

### CÃ³digo:

```python
# âœ… CORRETO
class HierarchicalMultiAgent(dspy.Module):
    """Sistema multi-agente com coordenaÃ§Ã£o hierÃ¡rquica."""  # PT
    
    def __init__(self):
        super().__init__()
        # Inicializa coordenador e especialistas  # PT
        self.coordinator = dspy.ChainOfThought(CoordinatorSignature)
```

```python
# âŒ ERRADO
class SistemaMultiAgente(dspy.Module):  # Nome em PT
    """Multi-agent system with hierarchical coordination."""  # Docstring em EN
    
    def __init__(self):
        super().__init__()
        # Initialize coordinator  # ComentÃ¡rio em EN misturado
```

---

## ğŸ“ ESTRUTURA DE NOTEBOOKS

### PadrÃ£o de CapÃ­tulo:

```markdown
# CapÃ­tulo X: TÃ­tulo

## Objetivos de Aprendizado
- Objetivo 1
- Objetivo 2

## Parte 1: Teoria
[ExplicaÃ§Ã£o completa com referÃªncias]

## Parte 2: ImplementaÃ§Ã£o
[CÃ³digo com explicaÃ§Ãµes]

## Parte 3: Testes
[Casos simples E complexos]

## Parte 4: AnÃ¡lise
[Trade-offs, limitaÃ§Ãµes, quando usar]

## Parte 5: ConclusÃµes
[Summary, prÃ³ximos passos]
```

### CÃ©lulas Markdown:
- Usar `##`, `###` para hierarquia
- Incluir exemplos de cÃ³digo em markdown quando explicando
- Adicionar referÃªncias: `[Author, Year]`
- Trade-offs sempre em formato: `âœ… Vantagem` / `âŒ Desvantagem`

### CÃ©lulas Python:
- ComentÃ¡rios em portuguÃªs
- Docstrings completas em portuguÃªs
- Nomes de variÃ¡veis/funÃ§Ãµes em inglÃªs
- Print statements informativos

---

## ğŸ—‚ï¸ MAPEAMENTO DE FONTES

### Notebooks Existentes â†’ CapÃ­tulos:

| Notebook Fonte | CapÃ­tulo Destino | Status |
|----------------|------------------|--------|
| `dspy_agents_basic_handson_final.ipynb` | Cap 2 | 50% |
| `dspy_multiagent_cognitive_architectures.ipynb` | Caps 4-7 | 0% |
| `dspy_multiagent_optimization.ipynb` | Caps 9-10 | 0% |
| `MULTIAGENT_OPTIMIZATION_SUMMARY.md` | Caps 8,10,11 | 0% |
| `dspy_optimization_mastery.ipynb` | Cap 12 | 0% |
| `dspy_tool_use_enterprise.ipynb` | Cap 14 | 0% |

**SEMPRE consultar `docs/_planejamento/02-MAPEAMENTO-NOTEBOOKS.md` para detalhes.**

---

## ğŸ¨ TOM E ESTILO

### âœ… TÃ©cnico e Preciso
- AnÃ¡lise profunda de trade-offs
- DiscussÃ£o honesta de limitaÃ§Ãµes
- Quando NÃƒO usar determinada abordagem
- MÃ©tricas e dados reais quando possÃ­vel

### âœ… DidÃ¡tico
- Narrativa progressiva (simples â†’ complexo)
- Conceitos explicados antes de usar
- Exemplos prÃ¡ticos e testÃ¡veis
- VisualizaÃ§Ãµes quando apropriado

### âœ… Production-Grade
- CÃ³digo que realmente funciona em produÃ§Ã£o
- NÃ£o apenas "hello world"
- ConsideraÃ§Ãµes de custo, latÃªncia, escala
- Monitoring, debugging, maintenance

### âŒ Evitar
- Sensacionalismo ("revolucionÃ¡rio", "melhor soluÃ§Ã£o")
- Promessas exageradas
- CÃ³digo nÃ£o testado
- Conceitos sem referÃªncias

---

## ğŸ“š REFERÃŠNCIAS ACADÃŠMICAS

### Papers Principais (SEMPRE CITAR):

**DSPy:**
```
Khattab, O., et al. (2023). DSPy: Compiling Declarative Language Model Calls 
into Self-Improving Pipelines. arXiv:2310.03714.
```

**ReAct:**
```
Yao, S., et al. (2022). ReAct: Synergizing Reasoning and Acting in Language Models. 
arXiv:2210.03629.
```

**Reflexion:**
```
Shinn, N., et al. (2023). Reflexion: Language Agents with Verbal Reinforcement Learning. 
arXiv:2303.11366.
```

**MIPRO:**
```
Opsahl-Ong, B., et al. (2024). Optimizing Instructions and Demonstrations for 
Multi-Stage Language Model Programs. arXiv:2406.11695.
```

**Chain-of-Thought:**
```
Wei, J., et al. (2022). Chain-of-Thought Prompting Elicits Reasoning in Large Language Models. 
NeurIPS 2022.
```

**Ver lista completa:** `docs/_planejamento/08-REFERENCIAS-ACADEMICAS.md`

---

## ğŸ”„ WORKFLOW DE MODELAGEM

### Processo para Cada CapÃ­tulo:

1. **Analisar fonte:**
   ```bash
   # Ver notebook fonte
   jupyter lab notebooks/[notebook-fonte].ipynb
   ```

2. **Planejar estrutura:**
   - Ler `01-BOOK-OUTLINE.md` â†’ objetivos do capÃ­tulo
   - Ler `02-MAPEAMENTO-NOTEBOOKS.md` â†’ o que extrair
   - Ler `04-KNOWLEDGE-GAPS.md` â†’ o que explicar

3. **Criar notebook:**
   - ComeÃ§ar com teoria completa
   - Adicionar implementaÃ§Ã£o com contexto
   - Incluir testes (sucesso E falha quando relevante)
   - AnÃ¡lise de trade-offs
   - ConclusÃµes e prÃ³ximos passos

4. **Validar:**
   - Executar todo cÃ³digo cÃ©lula por cÃ©lula
   - Verificar referÃªncias
   - Checar convenÃ§Ãµes PT/EN
   - Atualizar status

5. **Documentar:**
   - Atualizar `00-FONTE-DA-VERDADE.md`
   - Atualizar `05-PROGRESS-TRACKER.md`
   - Marcar TODOs

---

## ğŸ“Š STATUS E PROGRESSO

### Consultar SEMPRE:
- **Status real:** `docs/_planejamento/00-FONTE-DA-VERDADE.md`
- **Progresso detalhado:** `docs/_planejamento/05-PROGRESS-TRACKER.md`
- **Ãšltima sessÃ£o:** `docs/_planejamento/99-SESSAO-PROGRESSO.md`

### Atual:
- **Progresso geral:** ~8%
- **Cap 2:** 50% (completar primeiro)
- **PrÃ³ximo:** Cap 4 (Sequential)

---

## ğŸš¨ PONTOS CRÃTICOS

### ATENÃ‡ÃƒO ESPECIAL:

1. **Cap 2 (50%):** Material pronto em `parte-1-fundamentos/02-CONTEUDO-RESTANTE-PARA-ADICIONAR.md`
   
2. **Cap 13 (Fine-Tuning):** REQUER RESEARCH extenso
   - Ver: `docs/_planejamento/06-RESEARCH-FINETUNING.md`
   
3. **Cap 15 (LLMOps):** REQUER RESEARCH extenso
   - Ver: `docs/_planejamento/07-RESEARCH-LLMOPS.md`

4. **DemonstraÃ§Ã£o de LimitaÃ§Ãµes:** CRÃTICO em Cap 2
   - Mostrar onde single agent FALHA
   - MotivaÃ§Ã£o para multi-agent

---

## ğŸ¯ QUICK REFERENCE

### Comandos Ãšteis:

```bash
# Ver estrutura
cat docs/00-INDICE-VISUAL.md

# Ver status
cat docs/_planejamento/00-FONTE-DA-VERDADE.md

# Ver progresso
cat docs/_planejamento/05-PROGRESS-TRACKER.md

# Trabalhar em capÃ­tulo
cd docs/parte-X-*/
jupyter lab cap-XX-*.ipynb

# Build livro
cd docs && jupyter-book build .
```

### Arquivos Importantes:

| Arquivo | Atalho | PropÃ³sito |
|---------|--------|-----------|
| Fonte da Verdade | `_planejamento/00-*` | Status real |
| Ãndice Visual | `00-INDICE-VISUAL.md` | NavegaÃ§Ã£o |
| Outline | `_planejamento/01-*` | Estrutura |
| Mapeamento | `_planejamento/02-*` | Fontes |
| Writing Guide | `_planejamento/03-*` | ConvenÃ§Ãµes |
| Progress | `_planejamento/05-*` | Status detalhado |

---

## âœ… CHECKLIST PARA CADA CAPÃTULO

Antes de marcar como completo:

- [ ] Teoria completa com referÃªncias
- [ ] CÃ³digo funcional e testado
- [ ] ComentÃ¡rios e docstrings em portuguÃªs
- [ ] Nomes de cÃ³digo em inglÃªs
- [ ] Trade-offs explicitados
- [ ] LimitaÃ§Ãµes discutidas
- [ ] PrÃ³ximos passos claros
- [ ] Status atualizado em `00-FONTE-DA-VERDADE.md`
- [ ] Progress atualizado em `05-PROGRESS-TRACKER.md`
- [ ] TODOs marcados como completos

---

## ğŸ†˜ EM CASO DE DÃšVIDA

1. **Estrutura?** â†’ `docs/00-INDICE-VISUAL.md`
2. **Status?** â†’ `docs/_planejamento/00-FONTE-DA-VERDADE.md`
3. **Como escrever?** â†’ `docs/_planejamento/03-WRITING-GUIDE.md`
4. **Que fonte usar?** â†’ `docs/_planejamento/02-MAPEAMENTO-NOTEBOOKS.md`
5. **Progresso?** â†’ `docs/_planejamento/05-PROGRESS-TRACKER.md`

---

## ğŸ“ FILOSOFIA DO PROJETO

> "NÃ£o estamos escrevendo um tutorial bÃ¡sico. Estamos criando um livro production-grade que engenheiros possam usar para construir sistemas reais."

**PrincÃ­pios:**
- ğŸ“Š Dados e mÃ©tricas reais
- ğŸ” AnÃ¡lise profunda de trade-offs
- âš–ï¸ Honestidade sobre limitaÃ§Ãµes
- ğŸ¯ Focus em produÃ§Ã£o, nÃ£o demos
- ğŸ“š Academicamente referenciado
- ğŸ’» CÃ³digo testÃ¡vel e funcional

---

**SEMPRE comece consultando:** `docs/_planejamento/00-FONTE-DA-VERDADE.md` ğŸ“

**Ãšltima atualizaÃ§Ã£o:** Novembro 2025


